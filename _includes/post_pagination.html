{% assign current_lang = page.lang | default: site.active_lang | default: site.locale %}

{% assign posts_lang = site.posts
  | where: "lang", current_lang
  | where_exp: "p", "p.hidden != true"
  | sort: "date"
%}

{%- assign prev_post = nil -%}
{%- assign next_post = nil -%}
{%- assign last = nil -%}
{%- assign found = false -%}

{%- for p in posts_lang -%}
  {%- if found and next_post == nil -%}
    {%- assign next_post = p -%}
    {%- break -%}
  {%- endif -%}

  {%- if p.id == page.id -%}
    {%- assign prev_post = last -%}
    {%- assign found = true -%}
  {%- endif -%}

  {%- assign last = p -%}
{%- endfor -%}

{% if prev_post or next_post %}
  <nav class="pagination">
    {% if prev_post %}
      <a href="{{ prev_post.url | relative_url }}"
         class="pagination--pager"
         title="{{ prev_post.title | markdownify | strip_html | strip }}">
        {{ site.data.ui-text[site.locale].pagination_previous | default: "Previous" }}
      </a>
    {% else %}
      <a href="#" class="pagination--pager disabled">
        {{ site.data.ui-text[site.locale].pagination_previous | default: "Previous" }}
      </a>
    {% endif %}

    {% if next_post %}
      <a href="{{ next_post.url | relative_url }}"
         class="pagination--pager"
         title="{{ next_post.title | markdownify | strip_html | strip }}">
        {{ site.data.ui-text[site.locale].pagination_next | default: "Next" }}
      </a>
    {% else %}
      <a href="#" class="pagination--pager disabled">
        {{ site.data.ui-text[site.locale].pagination_next | default: "Next" }}
      </a>
    {% endif %}
  </nav>
{% endif %}